<div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" onclick="onCloseClick()">&times;</button>
    <h4 class="modal-title" id="exampleModalLabel">Gesture Usability Scale - Fragen zu einzelner Geste</h4>
</div>
<div id="modal-body" class="modal-body">

    <div id="list-container"></div>

    <!--<button type="button" class="btn btn-warning" id="btn-reset-origin-data"><span class="glyphicon glyphicon-repeat"></span> Original GUS wiederherstellen</button>-->
    <!--<button type="button" class="btn btn-info pull-right" id="btn-add-gus-item"><span class="glyphicon glyphicon-plus"></span> Ein neues Item hinzufügen</button>-->

</div>
<hr style="margin: 0;">
<div class="modal-body">
    <h4 style="margin: 0">Faktoren</h4>
    <div id="dimension-btn-group">
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="acceptability">Akzeptanz</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="cognitive_stress">Kognitive Belastung</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="ergonomics">Ergonomie</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="feasability">Realisierbarkeit</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="learnability">Erlernbarkeit</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="mental_model">Mentales Modell</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="reliability">Zuverlässigkeit</button>
        <button type="button" class="btn btn-default btn-toggle btn-dimension hidden" id="usability">Nutzbarkeit</button>
        <button type="button" class="btn btn-default btn-toggle" id="all">Alle</button>
    </div>
</div>
<div id="modal-footer" class="modal-footer">
    <button type="button" class="btn btn-default" data-dismiss="modal" onclick="onCloseClick()"><span class="glyphicon glyphicon-floppy-disk"></span> Speichern & Schließen</button>
</div>


<script type="text/javascript" src="js/template-inputs.js"></script>
<script>
        $(document).ready(function () {
            currentGUS = GUS_SINGLE_GESTURES;
            renderDimensions($('#dimension-btn-group'));
            checkDimensions(getLocalItem(PROJECT_ORIGIN_GUS));

//            var originData = getLocalItem(PROJECT_ORIGIN_GUS);
            var data = getLocalItem(currentIdForModal + '.data');

            if (data !== null) {
                renderData(data);
            }
        });

        $('.show-hole-text').tooltip({
            container: 'body',
            placement: "top"
        });

        function renderData(data) {
            var listContainer = $('#list-container');

            for (var i = 0; i < data.length; i++) {
                var item = data[i];
                var clone = $('#form-item-container').find('#gusSingle').clone(true);
                $(clone).find('.question').val(item.question);
                $(clone).find('.show-hole-text').attr('title', data[i].itemText);
                $(clone).addClass(item.dimension);
                $(listContainer).append(clone);
//                updateBadges($('#list-container'), item.type);

                if (item.dimension !== DIMENSION_ANY) {
                    $(clone).find('.btn-delete').addClass('hidden');
                    var dimensionButton = $('#dimension-btn-group').find('#' + item.dimension);
                    if (dimensionButton) {
                        $(dimensionButton).addClass('active');
                        $(dimensionButton).addClass('btn-info');
                        $(dimensionButton).removeClass('inactive');
                    }
                }
                
                if (data[i].reversed === true)
                {
                    $(clone).find('.switchButtonAddon').click();
                }
            }

            checkDimensionItems();
            checkCurrentListState($('#list-container'));
        }

        function saveData() {
            var customGUS = new Array();
            var items = $('#list-container').children();

            for (var i = 0; i < items.length; i++) {
                var item = items[i];
                var itemText = $(item).find('.item-input-text').val();
                var reversed = $(item).find('#yes').hasClass('active') ? true : false;
                var dimension = getDimensionByElement($(item));
                var gusItem = new UsabilityScaleItem(itemText, dimension, 5, reversed);
                customGUS.push(gusItem);
            }
            setLocalItem(currentIdForModal + ".data", customGUS);
        }

        $('#btn-add-gus-item').on('click', function () {
            var item = $('#form-item-container').find('#gusSingle').clone();
            $('#list-container').append(item);
            checkCurrentListState($('#list-container'));
        });

//        $('#btn-reset-origin-data').on('click', function () {
//            var data = getLocalItem(PROJECT_ORIGIN_GUS);
//            if (data !== null) {
//                $('#list-container').empty();
//                renderData(data);
//            }
//            checkCurrentListState($('#list-container'));
//        });
</script>